import{r as e,j as s}from"./ui-BCB258fP.js";import{P as a}from"./PropertyCard-ifWluMwD.js";import{a as i,b as t}from"./properties-BbiwwG38.js";import{a as r}from"./index-BUAJGlhN.js";import{d as n}from"./destinations-CSraIk9T.js";import{S as c}from"./SEO-5e-vXuOd.js";import{C as l,a as o}from"./card-BrY1ysWX.js";import{F as d}from"./SearchBar-CPYRgRz-.js";import{c as m,u as p,h as x,e as h,k as g}from"./index-CeQtaJjl.js";import"./vendor-DPo8IFD3.js";import"./star-C_MLnoZG.js";import"./users-BXQBhXry.js";import"./bath-CE9kaSUM.js";import"./eye-Cs_4_w19.js";import"./snowflake-Mz1C_4Ds.js";import"./search-D6ha5TnO.js";import"./minus-COaFCz3e.js";import"./plus-CzHoXWxm.js";
/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f=m("landmark",[["path",{d:"M10 18v-7",key:"wt116b"}],["path",{d:"M11.12 2.198a2 2 0 0 1 1.76.006l7.866 3.847c.476.233.31.949-.22.949H3.474c-.53 0-.695-.716-.22-.949z",key:"1m329m"}],["path",{d:"M14 18v-7",key:"vav6t3"}],["path",{d:"M18 18v-7",key:"aexdmj"}],["path",{d:"M3 22h18",key:"8prr45"}],["path",{d:"M6 18v-7",key:"1ivflk"}]]);const j=()=>{var m;const j=new URLSearchParams(x().search),u=j.get("query")||"",y=j.get("type")||"accommodation",k=(null==(m=j.get("filters"))?void 0:m.split(","))||[],v=j.get("accommodation")||"villa",w=j.get("checkIn"),N=j.get("checkOut"),b=u.toLowerCase(),C=p(),L=e.useCallback((e=>{let s=0;return b?("name"in e&&"string"==typeof e.name&&e.name.toLowerCase().includes(b)&&(s+=10),"location"in e&&"string"==typeof e.location&&e.location.toLowerCase().includes(b)&&(s+=8),"tags"in e&&Array.isArray(e.tags)&&e.tags.some((e=>"string"==typeof e&&e.toLowerCase().includes(b)))&&(s+=5),"description"in e&&"string"==typeof e.description&&e.description.toLowerCase().includes(b)&&(s+=2),"title"in e&&"string"==typeof e.title&&e.title.toLowerCase().includes(b)&&(s+=10),"category"in e&&"string"==typeof e.category&&e.category.toLowerCase().includes(b)&&(s+=8),"excerpt"in e&&"string"==typeof e.excerpt&&e.excerpt.toLowerCase().includes(b)&&(s+=4),"content"in e&&"string"==typeof e.content&&e.content.toLowerCase().includes(b)&&(s+=2),s):1}),[b]),T=e.useMemo((()=>[...i(),...t()].filter((e=>(e=>{var s;if("all"!==v&&e.type!==v)return!1;const a=k.find((e=>d.kapasitas.includes(e)));if(a){const[s,i]=a.split("-").map((e=>parseInt(e)));if(i){if(e.capacity<s||e.capacity>i)return!1}else if(e.capacity<s)return!1}const i=k.find((e=>d.jarak.includes(e)));if(i&&e.distanceToBeach){const a=parseFloat((null==(s=i.match(/\d+/))?void 0:s[0])||"0");if(e.distanceToBeach>a)return!1}const t=k.find((e=>d.harga.includes(e)));if(t){const s=e.price;if(t.includes("< 500rb")&&s>=5e5)return!1;if(t.includes("500rb - 1jt")&&(s<5e5||s>1e6))return!1;if(t.includes("1jt - 2jt")&&(s<1e6||s>2e6))return!1;if(t.includes("> 2jt")&&s<=2e6)return!1}const r=k.filter((e=>d.fasilitas.includes(e)));if(r.length>0&&!r.every((s=>e.amenities.includes(s))))return!1;const n=k.filter((e=>d.lokasi.includes(e)));if(n.length>0&&!n.some((s=>e.location.includes(s))))return!1;const c=k.find((e=>d.rating.includes(e)));if(c){const s=parseInt(c);if(e.rating<s)return!1}return!0})(e)&&(e=>{var s;if(!w||!N)return!0;const a=new Date(w),i=new Date(N);return!(null==(s=e.bookedDates)?void 0:s.some((e=>{const s=new Date(e.start),t=new Date(e.end);return a>=s&&a<t||i>s&&i<=t||a<=s&&i>=t})))})(e))).map((e=>({...e,score:L(e)}))).sort(((e,s)=>s.score-e.score))),[u,y,k,v,w,N]),M=r.map((e=>({...e,score:L(e)}))),A=n.map((e=>({...e,score:L(e)}))),D=[...T,...M,...A].filter((e=>e.score>0)).sort(((e,s)=>s.score-e.score)),S=T.filter((e=>i().some((s=>"id"in e&&s.id===e.id)))),P=T.filter((e=>t().some((s=>"id"in e&&s.id===e.id)))),$=D.filter((e=>{const s=i().some((s=>"id"in e&&s.id===e.id)),a=t().some((s=>"id"in e&&s.id===e.id));return!s&&!a})),B=$.filter((e=>M.some((s=>"id"in e&&s.id===e.id)))),F=$.filter((e=>A.some((s=>"id"in e&&s.id===e.id)))),H=`Hasil pencarian untuk "${u}" di Sawarna. Temukan villa, homestay, destinasi wisata, dan artikel terkait.`;return s.jsxs("div",{className:"min-h-screen flex flex-col",children:[s.jsx(c,{title:`Hasil Pencarian: ${u} | Villa Sawarna`,description:H,keywords:`${u}, villa sawarna, homestay sawarna, destinasi sawarna, artikel sawarna`}),s.jsxs("div",{className:"container-custom py-8",children:[s.jsxs("h1",{className:"text-2xl md:text-3xl font-bold mb-4",children:["Hasil Pencarian: ",u]}),0===D.length?s.jsx("div",{className:"text-center py-12",children:s.jsxs("p",{className:"text-gray-500 dark:text-gray-400",children:['Tidak ada hasil yang ditemukan untuk "',u,'".']})}):s.jsxs(s.Fragment,{children:[s.jsxs("section",{className:"mb-8",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[s.jsx(f,{className:"h-5 w-5 text-ocean"}),s.jsx("h2",{className:"text-xl font-semibold",children:"Destinasi Wisata"})]}),s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 xl:grid-cols-4 gap-4",children:F.length>0?F.map((e=>s.jsxs(l,{className:"overflow-hidden cursor-pointer hover:shadow-lg transition-shadow",onClick:()=>C(`/destinations/${e.id}`),children:[Array.isArray(e.images)&&e.images.length>0?s.jsx("img",{src:e.images[0],alt:e.name,className:"w-full h-48 object-cover"}):s.jsx("div",{className:"w-full h-48 object-cover bg-gray-200 dark:bg-gray-700 flex items-center justify-center text-gray-500 dark:text-gray-400",children:"Tidak ada gambar"}),s.jsxs(o,{className:"p-4",children:[s.jsx("h3",{className:"font-semibold mb-2",children:e.name}),"description"in e&&e.description&&s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 line-clamp-2",children:e.description})]})]},e.id))):s.jsx("div",{className:"text-gray-500 dark:text-gray-400",children:"Tidak ada hasil destinasi."})})]}),s.jsxs("section",{className:"mb-8",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[s.jsx(h,{className:"h-5 w-5 text-ocean"}),s.jsx("h2",{className:"text-xl font-semibold",children:"Akomodasi"})]}),s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 xl:grid-cols-4 gap-4",children:S.length>0||P.length>0?s.jsxs(s.Fragment,{children:[S.map((e=>s.jsx(a,{...e},e.id))),P.map((e=>s.jsx(a,{...e},e.id)))]}):s.jsx("div",{className:"text-gray-500 dark:text-gray-400",children:"Tidak ada hasil akomodasi."})})]}),s.jsxs("section",{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[s.jsx(g,{className:"h-5 w-5 text-ocean"}),s.jsx("h2",{className:"text-xl font-semibold",children:"Artikel Terkait"})]}),s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 xl:grid-cols-4 gap-4",children:B.length>0?B.map((e=>s.jsxs(l,{className:"overflow-hidden cursor-pointer hover:shadow-lg transition-shadow",onClick:()=>C(`/articles/${e.id}`),children:[s.jsx("img",{src:e.image,alt:e.title,className:"w-full h-48 object-cover"}),s.jsxs(o,{className:"p-4",children:[s.jsx("h3",{className:"font-semibold mb-2",children:e.title}),"excerpt"in e&&e.excerpt&&s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 line-clamp-2",children:e.excerpt})]})]},e.id))):s.jsx("div",{className:"text-gray-500 dark:text-gray-400",children:"Tidak ada hasil artikel."})})]})]})]})]})};export{j as default};
