var t,e,s,i,r,a,n,h,o,l,c,u,d,p,f,g,v,y,b,m,R,P,w,O,x,C,k=t=>{throw TypeError(t)},M=(t,e,s)=>e.has(t)||k("Cannot "+s),E=(t,e,s)=>(M(t,e,"read from private field"),s?s.call(t):e.get(t)),F=(t,e,s)=>e.has(t)?k("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,s),S=(t,e,s,i)=>(M(t,e,"write to private field"),i?i.call(t,s):e.set(t,s),s),W=(t,e,s)=>(M(t,e,"access private method"),s);import{r as U,s as q,t as Q,v as T,w as I,x as _,y as D,z as N,D as j,E as L,G as A,J as H,K as B,Q as K,R as z,U as G,V as J,W as V}from"./index-CeQtaJjl.js";import{r as X,j as Y}from"./ui-BCB258fP.js";import{a as Z,b as $,c as tt}from"./destinations-CSraIk9T.js";var et=(C=class extends U{constructor(v,y){super(),F(this,g),F(this,t),F(this,e),F(this,s),F(this,i),F(this,r),F(this,a),F(this,n),F(this,h),F(this,o),F(this,l),F(this,c),F(this,u),F(this,d),F(this,p),F(this,f,new Set),this.options=y,S(this,t,v),S(this,h,null),S(this,n,q()),this.options.experimental_prefetchInRender||E(this,n).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(y)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){1===this.listeners.size&&(E(this,e).addObserver(this),st(E(this,e),this.options)?W(this,g,v).call(this):this.updateResult(),W(this,g,R).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return it(E(this,e),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return it(E(this,e),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,W(this,g,P).call(this),W(this,g,w).call(this),E(this,e).removeObserver(this)}setOptions(s){const i=this.options,r=E(this,e);if(this.options=E(this,t).defaultQueryOptions(s),void 0!==this.options.enabled&&"boolean"!=typeof this.options.enabled&&"function"!=typeof this.options.enabled&&"boolean"!=typeof Q(this.options.enabled,E(this,e)))throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");W(this,g,O).call(this),E(this,e).setOptions(this.options),i._defaulted&&!T(this.options,i)&&E(this,t).getQueryCache().notify({type:"observerOptionsUpdated",query:E(this,e),observer:this});const a=this.hasListeners();a&&rt(E(this,e),r,this.options,i)&&W(this,g,v).call(this),this.updateResult(),!a||E(this,e)===r&&Q(this.options.enabled,E(this,e))===Q(i.enabled,E(this,e))&&I(this.options.staleTime,E(this,e))===I(i.staleTime,E(this,e))||W(this,g,y).call(this);const n=W(this,g,b).call(this);!a||E(this,e)===r&&Q(this.options.enabled,E(this,e))===Q(i.enabled,E(this,e))&&n===E(this,p)||W(this,g,m).call(this,n)}getOptimisticResult(s){const n=E(this,t).getQueryCache().build(E(this,t),s),h=this.createResult(n,s);return function(t,e){if(!T(t.getCurrentResult(),e))return!0;return!1}(this,h)&&(S(this,i,h),S(this,a,this.options),S(this,r,E(this,e).state)),h}getCurrentResult(){return E(this,i)}trackResult(t,e){return new Proxy(t,{get:(t,s)=>(this.trackProp(s),null==e||e(s),Reflect.get(t,s))})}trackProp(t){E(this,f).add(t)}getCurrentQuery(){return E(this,e)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(e){const s=E(this,t).defaultQueryOptions(e),i=E(this,t).getQueryCache().build(E(this,t),s);return i.fetch().then((()=>this.createResult(i,s)))}fetch(t){return W(this,g,v).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then((()=>(this.updateResult(),E(this,i))))}createResult(t,u){var d;const p=E(this,e),f=this.options,g=E(this,i),v=E(this,r),y=E(this,a),b=t!==p?t.state:E(this,s),{state:m}=t;let R,P={...m},w=!1;if(u._optimisticResults){const e=this.hasListeners(),s=!e&&st(t,u),i=e&&rt(t,p,u,f);(s||i)&&(P={...P,...A(m.data,t.options)}),"isRestoring"===u._optimisticResults&&(P.fetchStatus="idle")}let{error:O,errorUpdatedAt:x,status:C}=P;R=P.data;let k=!1;if(void 0!==u.placeholderData&&void 0===R&&"pending"===C){let t;(null==g?void 0:g.isPlaceholderData)&&u.placeholderData===(null==y?void 0:y.placeholderData)?(t=g.data,k=!0):t="function"==typeof u.placeholderData?u.placeholderData(null==(d=E(this,c))?void 0:d.state.data,E(this,c)):u.placeholderData,void 0!==t&&(C="success",R=H(null==g?void 0:g.data,t,u),w=!0)}if(u.select&&void 0!==R&&!k)if(g&&R===(null==v?void 0:v.data)&&u.select===E(this,o))R=E(this,l);else try{S(this,o,u.select),R=u.select(R),R=H(null==g?void 0:g.data,R,u),S(this,l,R),S(this,h,null)}catch(I){S(this,h,I)}E(this,h)&&(O=E(this,h),R=E(this,l),x=Date.now(),C="error");const M="fetching"===P.fetchStatus,F="pending"===C,W="error"===C,U=F&&M,Q=void 0!==R,T={status:C,fetchStatus:P.fetchStatus,isPending:F,isSuccess:"success"===C,isError:W,isInitialLoading:U,isLoading:U,data:R,dataUpdatedAt:P.dataUpdatedAt,error:O,errorUpdatedAt:x,failureCount:P.fetchFailureCount,failureReason:P.fetchFailureReason,errorUpdateCount:P.errorUpdateCount,isFetched:P.dataUpdateCount>0||P.errorUpdateCount>0,isFetchedAfterMount:P.dataUpdateCount>b.dataUpdateCount||P.errorUpdateCount>b.errorUpdateCount,isFetching:M,isRefetching:M&&!F,isLoadingError:W&&!Q,isPaused:"paused"===P.fetchStatus,isPlaceholderData:w,isRefetchError:W&&Q,isStale:at(t,u),refetch:this.refetch,promise:E(this,n)};if(this.options.experimental_prefetchInRender){const e=t=>{"error"===T.status?t.reject(T.error):void 0!==T.data&&t.resolve(T.data)},s=()=>{const t=S(this,n,T.promise=q());e(t)},i=E(this,n);switch(i.status){case"pending":t.queryHash===p.queryHash&&e(i);break;case"fulfilled":"error"!==T.status&&T.data===i.value||s();break;case"rejected":"error"===T.status&&T.error===i.reason||s()}}return T}updateResult(){const t=E(this,i),s=this.createResult(E(this,e),this.options);if(S(this,r,E(this,e).state),S(this,a,this.options),void 0!==E(this,r).data&&S(this,c,E(this,e)),T(s,t))return;S(this,i,s);W(this,g,x).call(this,{listeners:(()=>{if(!t)return!0;const{notifyOnChangeProps:e}=this.options,s="function"==typeof e?e():e;if("all"===s||!s&&!E(this,f).size)return!0;const r=new Set(s??E(this,f));return this.options.throwOnError&&r.add("error"),Object.keys(E(this,i)).some((e=>{const s=e;return E(this,i)[s]!==t[s]&&r.has(s)}))})()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&W(this,g,R).call(this)}},t=new WeakMap,e=new WeakMap,s=new WeakMap,i=new WeakMap,r=new WeakMap,a=new WeakMap,n=new WeakMap,h=new WeakMap,o=new WeakMap,l=new WeakMap,c=new WeakMap,u=new WeakMap,d=new WeakMap,p=new WeakMap,f=new WeakMap,g=new WeakSet,v=function(t){W(this,g,O).call(this);let s=E(this,e).fetch(this.options,t);return(null==t?void 0:t.throwOnError)||(s=s.catch(_)),s},y=function(){W(this,g,P).call(this);const t=I(this.options.staleTime,E(this,e));if(D||E(this,i).isStale||!N(t))return;const s=j(E(this,i).dataUpdatedAt,t);S(this,u,setTimeout((()=>{E(this,i).isStale||this.updateResult()}),s+1))},b=function(){return("function"==typeof this.options.refetchInterval?this.options.refetchInterval(E(this,e)):this.options.refetchInterval)??!1},m=function(t){W(this,g,w).call(this),S(this,p,t),!D&&!1!==Q(this.options.enabled,E(this,e))&&N(E(this,p))&&0!==E(this,p)&&S(this,d,setInterval((()=>{(this.options.refetchIntervalInBackground||L.isFocused())&&W(this,g,v).call(this)}),E(this,p)))},R=function(){W(this,g,y).call(this),W(this,g,m).call(this,W(this,g,b).call(this))},P=function(){E(this,u)&&(clearTimeout(E(this,u)),S(this,u,void 0))},w=function(){E(this,d)&&(clearInterval(E(this,d)),S(this,d,void 0))},O=function(){const i=E(this,t).getQueryCache().build(E(this,t),this.options);if(i===E(this,e))return;const r=E(this,e);S(this,e,i),S(this,s,i.state),this.hasListeners()&&(null==r||r.removeObserver(this),i.addObserver(this))},x=function(s){B.batch((()=>{s.listeners&&this.listeners.forEach((t=>{t(E(this,i))})),E(this,t).getQueryCache().notify({query:E(this,e),type:"observerResultsUpdated"})}))},C);function st(t,e){return function(t,e){return!1!==Q(e.enabled,t)&&void 0===t.state.data&&!("error"===t.state.status&&!1===e.retryOnMount)}(t,e)||void 0!==t.state.data&&it(t,e,e.refetchOnMount)}function it(t,e,s){if(!1!==Q(e.enabled,t)){const i="function"==typeof s?s(t):s;return"always"===i||!1!==i&&at(t,e)}return!1}function rt(t,e,s,i){return(t!==e||!1===Q(i.enabled,t))&&(!s.suspense||"error"!==t.state.status)&&at(t,s)}function at(t,e){return!1!==Q(e.enabled,t)&&t.isStaleByTime(I(e.staleTime,t))}var nt=class extends et{constructor(t,e){super(t,e)}bindMethods(){super.bindMethods(),this.fetchNextPage=this.fetchNextPage.bind(this),this.fetchPreviousPage=this.fetchPreviousPage.bind(this)}setOptions(t){super.setOptions({...t,behavior:K()})}getOptimisticResult(t){return t.behavior=K(),super.getOptimisticResult(t)}fetchNextPage(t){return this.fetch({...t,meta:{fetchMore:{direction:"forward"}}})}fetchPreviousPage(t){return this.fetch({...t,meta:{fetchMore:{direction:"backward"}}})}createResult(t,e){var s,i;const{state:r}=t,a=super.createResult(t,e),{isFetching:n,isRefetching:h,isError:o,isRefetchError:l}=a,c=null==(i=null==(s=r.fetchMeta)?void 0:s.fetchMore)?void 0:i.direction,u=o&&"forward"===c,d=n&&"forward"===c,p=o&&"backward"===c,f=n&&"backward"===c;return{...a,fetchNextPage:this.fetchNextPage,fetchPreviousPage:this.fetchPreviousPage,hasNextPage:G(e,r.data),hasPreviousPage:z(e,r.data),isFetchNextPageError:u,isFetchingNextPage:d,isFetchPreviousPageError:p,isFetchingPreviousPage:f,isRefetchError:l&&!u&&!p,isRefetching:h&&!d&&!f}}},ht=X.createContext(!1);ht.Provider;var ot=X.createContext(function(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}()),lt=(t,e,s)=>e.fetchOptimistic(t).catch((()=>{s.clearReset()}));function ct(t,e,s){var i,r,a,n,h;const o=V(),l=X.useContext(ht),c=X.useContext(ot),u=o.defaultQueryOptions(t);null==(r=null==(i=o.getDefaultOptions().queries)?void 0:i._experimental_beforeQuery)||r.call(i,u),u._optimisticResults=l?"isRestoring":"optimistic",(t=>{const e=t.staleTime;t.suspense&&(t.staleTime="function"==typeof e?(...t)=>Math.max(e(...t),1e3):Math.max(e??1e3,1e3),"number"==typeof t.gcTime&&(t.gcTime=Math.max(t.gcTime,1e3)))})(u),((t,e)=>{(t.suspense||t.throwOnError||t.experimental_prefetchInRender)&&(e.isReset()||(t.retryOnMount=!1))})(u,c),(t=>{X.useEffect((()=>{t.clearReset()}),[t])})(c);const d=!o.getQueryCache().get(u.queryHash),[p]=X.useState((()=>new e(o,u))),f=p.getOptimisticResult(u),g=!l&&!1!==t.subscribed;if(X.useSyncExternalStore(X.useCallback((t=>{const e=g?p.subscribe(B.batchCalls(t)):_;return p.updateResult(),e}),[p,g]),(()=>p.getCurrentResult()),(()=>p.getCurrentResult())),X.useEffect((()=>{p.setOptions(u)}),[u,p]),((t,e)=>(null==t?void 0:t.suspense)&&e.isPending)(u,f))throw lt(u,p,c);if((({result:t,errorResetBoundary:e,throwOnError:s,query:i,suspense:r})=>t.isError&&!e.isReset()&&!t.isFetching&&i&&(r&&void 0===t.data||J(s,[t.error,i])))({result:f,errorResetBoundary:c,throwOnError:u.throwOnError,query:o.getQueryCache().get(u.queryHash),suspense:u.suspense}))throw f.error;if(null==(n=null==(a=o.getDefaultOptions().queries)?void 0:a._experimental_afterQuery)||n.call(a,u,f),u.experimental_prefetchInRender&&!D&&((t,e)=>t.isLoading&&t.isFetching&&!e)(f,l)){const t=d?lt(u,p,c):null==(h=o.getQueryCache().get(u.queryHash))?void 0:h.promise;null==t||t.catch(_).finally((()=>{p.updateResult()}))}return u.notifyOnChangeProps?f:p.trackResult(f)}function ut(t,e){return ct(t,nt)}const dt={all:["destinations"],lists:()=>[...dt.all,"list"],list:t=>[...dt.lists(),{filters:t}],details:()=>[...dt.all,"detail"],detail:t=>[...dt.details(),t],featured:()=>[...dt.all,"featured"],byType:t=>[...dt.all,"type",t]};function pt(){return ut({queryKey:dt.lists(),queryFn:({pageParam:t=0})=>{const e=6*t,s=e+6,i=Z();return{items:i.slice(e,s),nextPage:s<i.length?t+1:void 0,total:i.length}},getNextPageParam:t=>t.nextPage,initialPageParam:0})}function ft(t){return ct({queryKey:dt.detail(t),queryFn:()=>$(t),enabled:!!t},et)}function gt(t){return ut({queryKey:dt.byType(t),queryFn:({pageParam:e=0})=>{const s=6*e,i=s+6,r=tt(t);return{items:r.slice(s,i),nextPage:i<r.length?e+1:void 0,total:r.length}},getNextPageParam:t=>t.nextPage,initialPageParam:0,enabled:!!t})}const vt=({className:t=""})=>Y.jsx("div",{className:t+" bg-gray-200 animate-pulse"});export{vt as S,gt as a,ft as b,pt as u};
